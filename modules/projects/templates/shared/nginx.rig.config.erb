server {
  access_log <%= scope.lookupvar "nginx::config::logdir" %>/<%= @name %>.access.log main;
  listen 80;
  server_name <%= @server_name %> www.<%= @server_name %>;

  location / {
    proxy_pass         http://127.0.0.1:3000;
  }
}

server {
  access_log <%= scope.lookupvar "nginx::config::logdir" %>/<%= @name %>.access.log main;
  listen 80;
  server_name shop.<%= @server_name %>;
  index index.html;

  location / {
    proxy_pass          http://127.0.0.1:9000;
  }
}

server {
  access_log <%= scope.lookupvar "nginx::config::logdir" %>/<%= @name %>.access.log main;
  listen 80;
  server_name api.<%= @server_name %>;
  index index.html;

  location / {
    proxy_pass          http://127.0.0.1:8000;
  }
}

server {
  access_log <%= scope.lookupvar "nginx::config::logdir" %>/<%= @name %>.access.log main;
  listen 80;
  server_name speedometer.<%= @server_name %>;
  index index.html;

  location / {
    proxy_pass          http://127.0.0.1:8888;
  }
}
